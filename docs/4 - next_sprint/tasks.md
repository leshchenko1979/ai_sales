# Задачи спринта: Стабилизация и рост

## 1. Реализация сущности Campaign
- [ ] Добавить базовые SQL-запросы для работы с кампаниями
- [ ] Реализовать CLI-команды для управления кампаниями

## 3. Реализация системы управления диалогами
### CampaignRunner
- [ ] Реализовать базовый класс CampaignRunner
- [ ] Добавить методы получения доступных аккаунтов
- [ ] Реализовать выбор случайного контакта из аудитории
- [ ] Добавить создание новых диалогов
- [ ] Интегрировать с AccountSafetyMiddleware

### DialogConductor
- [ ] Создать базовый класс DialogConductor
- [ ] Реализовать инициализацию движка диалога
- [ ] Добавить обработку входящих сообщений
- [ ] Реализовать отправку сообщений через safety middleware
- [ ] Интегрировать с PostHog для отправки метрик

### DialogReviver
- [ ] Реализовать процесс поиска "зависших" диалогов
- [ ] Добавить логику запроса follow-up сообщений у движка
- [ ] Реализовать определение "мертвых" диалогов
- [ ] Добавить обработку ошибок и метрики

### AccountSafetyMiddleware
- [ ] Создать централизованный класс для проверок безопасности
- [ ] Интегрировать существующую логику из AccountSafety
- [ ] Добавить обработку блокировок аккаунта
- [ ] Реализовать автоматическое обновление статусов диалогов

### Процесс запуска
- [ ] Реализовать восстановление активных диалогов
- [ ] Добавить запуск активных кампаний
- [ ] Реализовать запуск DialogReviver
- [ ] Добавить обработку ошибок и метрики

## 4. Запуск первого автоматического боевого диалога
- [ ] Настроить первую тестовую кампанию
- [ ] Подготовить и привязать аккаунты
- [ ] Настроить и протестировать промпты
- [ ] Запустить в ограниченном режиме
- [ ] Настроить мониторинг в PostHog

## Приоритеты
1. Базовая структура Campaign
2. Реализация системы управления диалогами
3. Интеграция с PostHog для сбора метрик
4. Тестовый запуск с минимальным набором функций

## Ограничения и риски
- Необходимо тщательно контролировать нагрузку на аккаунты
- Важно отслеживать качество диалогов через PostHog
- Начинать с минимального количества одновременных диалогов
- Обеспечить корректную обработку ошибок на всех уровнях
- Реализовать систему мониторинга состояния аккаунтов
